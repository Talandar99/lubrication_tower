local function lubrication_towerpipepictures()
	return {

		north = {
			filename = "__lubrication_tower__/graphics/assembling-machine-2-pipe-N.png",
			priority = "low",
			width = 71,
			height = 38,
			shift = util.by_pixel(2.25, 13.5),
			scale = 0.5,
		},
		east = {
			filename = "__base__/graphics/entity/assembling-machine-3/assembling-machine-3-pipe-E.png",
			priority = "extra-high",
			width = 42,
			height = 76,
			shift = util.by_pixel(-24.5, 1),
			scale = 0.5,
		},
		south = {
			filename = "__base__/graphics/entity/assembling-machine-3/assembling-machine-3-pipe-S.png",
			priority = "extra-high",
			width = 88,
			height = 61,
			shift = util.by_pixel(0, -31.25),
			scale = 0.5,
		},
		west = {
			filename = "__base__/graphics/entity/assembling-machine-3/assembling-machine-3-pipe-W.png",
			priority = "extra-high",
			width = 39,
			height = 73,
			shift = util.by_pixel(25.75, 1.25),
			scale = 0.5,
		},
	}
end

data:extend({
	{
		type = "item",
		name = "lubrication-tower",
		icon = "__lubrication_tower__/graphics/lubrication_tower_icon.png",
		subgroup = "module",
		color_hint = { text = "2" },
		order = "a[beeacon]",
		weight = 100 * kg,
		place_result = "lubrication-tower",
		stack_size = 10,
	},
})
data.raw["fluid"]["lubricant"].fuel_value = "0.01MJ"
data:extend({
	{
		name = "lubrication-tower",
		type = "beacon",
		icon = "__lubrication_tower__/graphics/lubrication_tower_icon.png",
		flags = { "placeable-player", "player-creation" },
		minable = { mining_time = 1, result = "lubrication-tower" },
		beacon_counter = "same_type",
		collision_box = { { -1.2, -1.2 }, { 1.2, 1.2 } },
		selection_box = { { -1.5, -1.5 }, { 1.5, 1.5 } },
		allowed_effects = { "consumption", "speed", "pollution" },
		graphics_set = require("beacon-animations"),
		max_health = 300,
		energy_usage = "40kW",
		profile = {
			1,
			0.7071,
			0.5773,
			0.5,
			0.4472,
			0.4082,
			0.3779,
			0.3535,
			0.3333,
			0.3162,
			0.3015,
			0.2886,
			0.2773,
			0.2672,
			0.2581,
			0.25,
			0.2425,
			0.2357,
			0.2294,
			0.2236,
			0.2182,
			0.2132,
			0.2085,
			0.2041,
			0.2,
			0.1961,
			0.1924,
			0.1889,
			0.1856,
			0.1825,
			0.1796,
			0.1767,
			0.174,
			0.1714,
			0.169,
			0.1666,
			0.1643,
			0.1622,
			0.1601,
			0.1581,
			0.1561,
			0.1543,
			0.1524,
			0.1507,
			0.149,
			0.1474,
			0.1458,
			0.1443,
			0.1428,
			0.1414,
			0.14,
			0.1386,
			0.1373,
			0.136,
			0.1348,
			0.1336,
			0.1324,
			0.1313,
			0.1301,
			0.129,
			0.128,
			0.127,
			0.1259,
			0.125,
			0.124,
			0.123,
			0.1221,
			0.1212,
			0.1203,
			0.1195,
			0.1186,
			0.1178,
			0.117,
			0.1162,
			0.1154,
			0.1147,
			0.1139,
			0.1132,
			0.1125,
			0.1118,
			0.1111,
			0.1104,
			0.1097,
			0.1091,
			0.1084,
			0.1078,
			0.1072,
			0.1066,
			0.1059,
			0.1054,
			0.1048,
			0.1042,
			0.1036,
			0.1031,
			0.1025,
			0.102,
			0.1015,
			0.101,
			0.1005,
			0.1,
		},
		energy_source = {
			type = "fluid",
			burns_fluid = true, -- fluid used as power
			emissions_per_minute = { pollution = 2 },
			light_flicker = {
				color = { 0, 0, 0, 0 }, -- to remove default burner glow
			},
			fluid_box = {
				pipe_picture = lubrication_towerpipepictures(),
				pipe_covers = pipecoverspictures(),
				always_draw_covers = true,
				volume = 10,
				filter = "lubricant",
				pipe_connections = {
					{ direction = defines.direction.west, position = { -1, 0 } },
					{ direction = defines.direction.north, position = { 0, -1 } },
					{ direction = defines.direction.east, position = { 1, 0 } },
					{ direction = defines.direction.south, position = { 0, 1 } },
				},
				production_type = "input-output",
			},
		},
		radius_visualisation_picture = {
			filename = "__base__/graphics/entity/beacon/beacon-radius-visualization.png",
			width = 10,
			height = 10,
		},
		supply_area_distance = 3,
		distribution_effectivity = 1.5,
		distribution_effectivity_bonus_per_quality_level = 0.2,
		module_slots = 3,
	},
})
data:extend({
	{
		type = "recipe",
		name = "lubrication-tower",
		enabled = false,
		ingredients = {
			{ type = "item", name = "steel-plate", amount = 50 },
			{ type = "item", name = "iron-plate", amount = 30 },
			{ type = "item", name = "pipe", amount = 20 },
			{ type = "item", name = "storage-tank", amount = 1 },
		},
		results = { { type = "item", name = "lubrication-tower", amount = 1 } },
	},
})

data:extend({
	{
		type = "technology",
		name = "lubrication-tower",
		icon_size = 200,
		icon = "__lubrication_tower__/graphics/lubrication_tower.png",
		effects = {
			{ type = "unlock-recipe", recipe = "lubrication-tower" },
		},
		prerequisites = { "lubricant", "effect-transmission" },
		unit = {
			count = 150,
			ingredients = {
				{ "automation-science-pack", 1 },
				{ "logistic-science-pack", 1 },
				{ "chemical-science-pack", 1 },
				{ "production-science-pack", 1 },
			},
			time = 30,
		},
		order = "ea[pelagos]",
	},
})
